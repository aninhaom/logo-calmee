// scripts/generate-sounds-map.js
const fs = require('fs');
const path = require('path');
const root = path.join(__dirname,'..','public','assets','sounds');
const outFile = path.join(root,'sounds-map.json');

function walk(dir, base='') {
  const res = {};
  if (!fs.existsSync(dir)) return res;
  const items = fs.readdirSync(dir);
  for (const it of items) {
    const full = path.join(dir, it);
    const rel = path.join(base, it);
    const stat = fs.statSync(full);
    if (stat.isDirectory()) Object.assign(res, walk(full, rel));
    else {
      const ext = path.extname(it).toLowerCase();
      if (['.mp3','.ogg','.wav','m4a'].includes(ext)) {
        res[rel.replace(/\\/g,'/')] = `/assets/sounds/${rel.replace(/\\/g,'/')}`;
      }
    }
  }
  return res;
}

const map = walk(root);
fs.writeFileSync(outFile, JSON.stringify(map, null, 2));
console.log('Gerado', outFile, Object.keys(map).length, 'arquivos.');

